function PreviewAvatarImage(e,t,a){if(e.files&&e.files[0]){var r=new FileReader;r.onload=function(r){$(e).closest(".avatar-container").children(".avatar-preview").html('<img class="'+a+'" src="'+r.target.result+'" width="'+t+'" height="'+t+'"/>')},r.readAsDataURL(e.files[0])}}$(document).on("ajax:success",function(e,t,a,r){r.responseText&&($("#modal").length||$("body").append($('<div class="modal show" id="modal"></div>')),$("#modal").html(r.responseText).modal("show"),$("select").select2(),$("[data-flatpickr]").mrFlatpickr(),LetterAvatar.transform())}),$(document).on("ajax:error",function(e,t,a,r){toastrs(r,"error")}),function(e,t){function a(a,r){a=a||"",r=r||60;var n,o,i,d,c,l=String(a).toUpperCase().split(" ");return n=1==l.length?l[0]?l[0].charAt(0):"?":l[0].charAt(0)+l[1].charAt(0),e.devicePixelRatio&&(r*=e.devicePixelRatio),o=(("?"==n?72:n.charCodeAt(0))-64)%20,(i=t.createElement("canvas")).width=r,i.height=r,(d=i.getContext("2d")).fillStyle=["#92dacb","#e7afa9","#acd6f1","#e4c695","#728191","#a3e4d7","#93d6af","#7fb2d4","#dab7e9","#7c9cbd","#dfce8c","#dfb999","#9fdfb9","#ecf0f1","#95a5a6","#dcb5eb","#e0b699","#e4a9a1","#bdc3c7","#90a0a1","#92dacb"][o],d.fillRect(0,0,i.width,i.height),d.font=Math.round(i.width/2)+"px Arial",d.textAlign="center",d.fillStyle="#FFF",d.fillText(n,r/2,r/1.5),c=i.toDataURL(),i=null,c}a.transform=function(){Array.prototype.forEach.call(t.querySelectorAll("img[avatar]"),function(e,t){t=e.getAttribute("avatar"),e.src=a(t,e.getAttribute("width")),e.removeAttribute("avatar"),e.setAttribute("alt",t)})},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.LetterAvatar=a):(window.LetterAvatar=a,t.addEventListener("DOMContentLoaded",function(e){a.transform()}))}(window,document);
