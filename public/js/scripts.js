function PreviewAvatarImage(t,e,a){if(t.files&&t.files[0]){var r=new FileReader;r.onload=function(r){$(t).closest(".avatar-container").children(".avatar-preview").html('<img class="'+a+'" src="'+r.target.result+'" width="'+e+'" height="'+e+'"/>')},r.readAsDataURL(t.files[0])}}function updateFilters(t,e){var a=new URL(window.location.href);a.searchParams.has("sort")&&(t=a.searchParams.get("sort")),a.searchParams.has("direction")&&(e=a.searchParams.get("direction")),$(".filter-controls a").each(function(a){$(this).removeClass("asc desc"),$(this).data("sort")==t&&$(this).addClass(e)})}$(document).on("ajax:success",function(t,e,a,r){r.responseText&&($("#modal").length||$("body").append($('<div class="modal show" id="modal"></div>')),$("#modal").html(r.responseText).modal("show"),$("select").select2(),$("[data-flatpickr]").mrFlatpickr(),LetterAvatar.transform())}),$(document).on("ajax:error",function(t,e,a,r){toastrs(r,"error")}),function(t,e){function a(a,r){a=a||"",r=r||60;var o,n,i,c,s,d=String(a).toUpperCase().split(" ");return o=1==d.length?d[0]?d[0].charAt(0):"?":d[0].charAt(0)+d[1].charAt(0),t.devicePixelRatio&&(r*=t.devicePixelRatio),n=(("?"==o?72:o.charCodeAt(0))-64)%20,(i=e.createElement("canvas")).width=r,i.height=r,(c=i.getContext("2d")).fillStyle=["#92dacb","#e7afa9","#acd6f1","#e4c695","#728191","#a3e4d7","#93d6af","#7fb2d4","#dab7e9","#7c9cbd","#dfce8c","#dfb999","#9fdfb9","#ecf0f1","#95a5a6","#dcb5eb","#e0b699","#e4a9a1","#bdc3c7","#90a0a1","#92dacb"][n],c.fillRect(0,0,i.width,i.height),c.font=Math.round(i.width/2)+"px Arial",c.textAlign="center",c.fillStyle="#FFF",c.fillText(o,r/2,r/1.5),s=i.toDataURL(),i=null,s}a.transform=function(){Array.prototype.forEach.call(e.querySelectorAll("img[avatar]"),function(t,e){e=t.getAttribute("avatar"),t.src=a(e,t.getAttribute("width")),t.removeAttribute("avatar"),t.setAttribute("alt",e)})},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.LetterAvatar=a):(window.LetterAvatar=a,e.addEventListener("DOMContentLoaded",function(t){a.transform()}))}(window,document),$(function(){$("body").on("click",".pagination a",function(t){t.preventDefault(),$(".paginate-container a").not(".pagination a").css("color","#dfecf6");var e=new URL(window.location.href);sort=e.searchParams.get("sort"),direction=e.searchParams.get("direction");var a=new URL($(this).attr("href"));sort&&(a.searchParams.set("sort",sort),a.searchParams.set("direction",direction)),$.ajax({url:a.href}).done(function(t){$(".paginate-container").html(t)}).fail(function(){toastrs("Data could not be loaded!","error")}),window.history.replaceState(null,null,a.href)}),$(".filter-controls a").on("click",function(t){t.preventDefault(),$(".paginate-container a").not(".pagination a").css("color","#dfecf6");var e=$(this).data("sort"),a=$(this).hasClass("asc")?"desc":"asc",r=new URL(window.location.href);r.searchParams.set("sort",e),r.searchParams.set("direction",a),$.ajax({url:r.href,data:{sort:e,direction:a}}).done(function(t){$(".paginate-container").html(t)}).fail(function(){toastrs("Data could not be loaded!","error")}),window.history.replaceState(null,null,r.href),updateFilters()})});
