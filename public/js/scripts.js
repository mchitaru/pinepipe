$(document).on("ajax:success",function(t,e,a,r){r.responseText&&($("#modal").length||$("body").append($('<div class="modal show" id="modal"></div>')),$("#modal").html(r.responseText).modal("show"),$("select").select2(),$("[data-flatpickr]").mrFlatpickr(),LetterAvatar.transform())}),$(document).on("ajax:error",function(t,e,a,r){toastrs(r,"error")}),function(t,e){function a(a,r){a=a||"",r=r||60;var o,n,c,i,d,l=String(a).toUpperCase().split(" ");return o=1==l.length?l[0]?l[0].charAt(0):"?":l[0].charAt(0)+l[1].charAt(0),t.devicePixelRatio&&(r*=t.devicePixelRatio),n=(("?"==o?72:o.charCodeAt(0))-64)%20,(c=e.createElement("canvas")).width=r,c.height=r,(i=c.getContext("2d")).fillStyle=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"][n-1],i.fillRect(0,0,c.width,c.height),i.font=Math.round(c.width/2)+"px Arial",i.textAlign="center",i.fillStyle="#FFF",i.fillText(o,r/2,r/1.5),d=c.toDataURL(),c=null,d}a.transform=function(){Array.prototype.forEach.call(e.querySelectorAll("img[avatar]"),function(t,e){e=t.getAttribute("avatar"),t.src=a(e,t.getAttribute("width")),t.removeAttribute("avatar"),t.setAttribute("alt",e)})},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.LetterAvatar=a):(window.LetterAvatar=a,e.addEventListener("DOMContentLoaded",function(t){a.transform()}))}(window,document);
